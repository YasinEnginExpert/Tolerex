-----------------------------------------------------------
TOLEREX: SAF YAZMA (PURE WRITE) PERFORMANS ANALİZİ
-----------------------------------------------------------

Tarih: 17 Ocak 2026
Konu: Arabellekli (Buffered) vs Arabelleksiz (Unbuffered) Kıyaslaması (550s TESTİ)

TEST TANIMI:
Bu test, Tolerex depolama katmanının (internal/storage) ağ yükü olmadan yazma
(Write) yolundaki performansını ölçer. 550 saniyelik (9+ dakika) kesintisiz
yük altında uzun dönemli kararlılık, jitter davranışı, allocation/GC baskısı
ve “TURBO” modun etkisi belgelenmiştir.

ÖNEMLİ NOT (ÖLÇÜM SEMANTİĞİ / KAPSAM):
Bu benchmark çıktılarında görülen Buffered (Standart/TURBO) ns/op değerleri,
çoğu senaryoda “diskin fiziksel yazma gecikmesi”nden ziyade “buffer’a yazma +
memory copy” maliyetini temsil eder. Yani:

- Buffered sonuçlar, flush/sync maliyeti her operasyonun içine dahil edilmediyse
  gerçek disk gecikmesini değil, RAM/CPU sınırını ölçer.
- Unbuffered sonuçlar, tipik olarak OS write path + kernel geçişi + dosya sistemi
  maliyetini daha çok yansıtır (yine de open/close, formatlama, kilitler vb. dahil olabilir).

Bu nedenle rapordaki yorumlar iki ayrı gerçekliği kapsar:
1) Write-path overhead (yazılım yolu) -> Buffered/TURBO burada zirve yapar.
2) Durable disk write (flush/sync ile kalıcı yazma) -> Bu ayrı test olarak ele alınmalıdır.

-----------------------------------------------------------
BENCHMARK VERİ ANALİZİ (SONUÇLAR)
-----------------------------------------------------------

1) GECİKME (LATENCY) DEĞERLERİ:
- Unbuffered: ~180,000 – 550,000 ns/op (OS + filesystem + I/O yolu baskın).
- Buffered (Standart): ~55 – 110 ns/op (çoğunlukla buffer’a yazma / CPU-RAM yolu).
- Buffered (TURBO): ~31 – 46 ns/op (maksimum optimizasyon / minimize edilmiş overhead).

Analiz:
- Arabellek kullanımı, write-path (yazılım hattı) gecikmesini dramatik biçimde azaltır.
- Ancak bu iyileşme, her operasyonun sonunda Flush/Sync yapılmıyorsa disk beklemesini
  “ortadan kaldırmak” değil, disk maliyetini benchmark kapsamının dışına taşımak anlamına gelir.
- 550s boyunca görülen zaman zaman artan ns/op blokları, Windows ortamında
  cache / background flush / antivirüs taraması / GC / scheduler gibi etkenlerle oluşan
  doğal jitter ile uyumludur.

2) TEORİK İŞLEM KAPASİTESİ (THROUGHPUT):
- Unbuffered: ~1,800 – 5,500 ops/s (operasyon başına ~0.18–0.55 ms).
- Buffered (Standart): ~10,000,000 – 15,000,000 ops/s (operasyon başına ~55–110 ns).
- Buffered (TURBO): ~28,000,000 ops/s (zirve ~31–46 ns).

Analiz (kritik netleştirme):
- Bu throughput değerleri, “operasyon = benchmark’ın ölçtüğü fonksiyon çağrısı” için
  teorik üst sınırdır.
- Eğer buffered yol disk flush/sync’i her op içine dahil etmiyorsa, bu ops/s değerleri
  “gerçek diske kalıcı yazma kapasitesi” değil, buffer’a kabul hızı / pipeline girişi
  kapasitesidir.
- Buna rağmen 550s boyunca yüksek hızda stabil kalması, CPU tarafı doygunluğu, kilitlenme
  ve bellek baskısı gibi risklerin iyi yönetildiğini gösterir.

3) KAYNAK VERİMLİLİĞİ (ALLOCATION / GC DAVRANIŞI):
- Unbuffered: 3 – 16 allocs/op (bazı koşullarda artış gözlenmiş).
- Buffered / TURBO: 0 allocs/op (ideal durum; GC baskısı minimum).

Analiz:
- 0 alloc/op, uzun süreli çalışmada GC jitter’ını azaltır ve tail latency’i iyileştirir.
- Unbuffered tarafta alloc/op artışı görülmesi, yazma yolunda:
  - string/[]byte dönüşümleri,
  - formatlama (fmt / Sprintf),
  - geçici buffer üretimi,
  - path üretimi,
  - per-op metadata hazırlığı
  gibi kalemlerin devreye girme ihtimalini yükseltir.
- Bu veri, TURBO/Buffered tasarımının “write-path heap’siz” çalıştığını ve uzun koşuda
  bellek şişmesi riskini ciddi biçimde azalttığını destekler.

-----------------------------------------------------------
TEKNİK ÇIKARIM
-----------------------------------------------------------

550 saniyelik stres testi, Tolerex’in depolama yazma hattında:

A) Write-path optimizasyonunun çok güçlü olduğunu gösterir:
- TURBO modunda 31–46 ns/op seviyeleri, “buffer’a kabul / RAM yolu” açısından
  yazılım katmanında ulaşılabilecek üst sınıra yakındır.

B) Ancak “disk performansı” yorumu ikiye ayrılmalıdır:
- Buffered/TURBO değerleri, diskin kendisini değil, çoğunlukla
  disk öncesi yazılım hattını temsil eder (flush/sync ölçüm kapsamına alınmadıkça).
- Unbuffered değerleri, disk/OS yolu ile daha çok koreledir fakat burada da
  open/close gibi ek maliyetler varsa “saf disk write” ile birebir aynı değildir.

Bu ayrım, raporu daha “bilimsel” ve sunumda daha tartışılmaz hale getirir.

-----------------------------------------------------------
SONUÇ
-----------------------------------------------------------

- Tolerex depolama katmanı, yazılım hattı (write-path) açısından belirgin bir darboğaz
  göstermemektedir; özellikle TURBO mod, düşük gecikme + sıfır allocation ile
  uzun koşuda istikrarlı bir profil sergilemiştir.
- 550s test, sistemin uzun süreli yük altında performansını koruduğunu ve
  bellek/GC kaynaklı şişme riskinin düşük olduğunu doğrular.
- “Fiziksel diske kalıcı yazma” performansı iddiası için, ayrıca
  Flush/Sync semantiğini op içine alan (durable write) benchmark ile
  ikinci bir ölçüm katmanı önerilir (bu raporun kapsamı write-path’i güçlü şekilde doğrulamıştır).

-----------------------------------------------------------
RAPOR GÜNCELLENDİ (V1.4 - 550s Kesin Veriler + Ölçüm Semantiği Netleştirmesi).
-----------------------------------------------------------
